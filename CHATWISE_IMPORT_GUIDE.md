# 📥 Chatwise 数据导入指南

## 将 Chatwise 聊天记录导入到记忆系统

这个工具可以将你的 Chatwise 聊天记录转换为记忆系统中的个人记忆，让 AI 助理更好地了解你。

## 🚀 快速开始

### 步骤 1: 预览数据（推荐）

在导入前先预览会提取什么内容：

```bash
./preview_chatwise.py
```

这个脚本会：
- 📊 显示找到的聊天文件数量
- 🏷️ 按类别分类用户消息
- 📋 显示示例内容
- ❓ 询问是否继续导入

### 步骤 2: 执行导入

确认预览内容无误后，执行导入：

```bash
./import_chatwise.py
```

这个脚本会：
- 📝 提取所有用户消息
- 🏷️ 自动分类内容
- 💾 添加到记忆系统
- 📊 显示导入统计

## 📁 数据提取说明

### 提取的内容类型

1. **用户消息**: 你在 Chatwise 中发送的所有消息
2. **对话上下文**: 聊天标题、使用的模型、时间信息
3. **助手回复**: 有价值的 AI 回复（作为知识储备）

### 自动分类

系统会根据内容自动分类：

- **个人偏好**: 喜欢、爱好、兴趣、习惯
- **工作信息**: 工作、职业、公司、职位
- **个人信息**: 生日、年龄、出生信息
- **人际关系**: 朋友、家人、同事、关系
- **目标和计划**: 目标、计划、想要、希望
- **技能和知识**: 技能、能力、学习、知识
- **重要日期和事件**: 时间、日期、会议、约会
- **其他信息**: 其他类型的内容

### 内容过滤

- ✅ 保留长度 > 5 字符的用户消息
- ✅ 保留长度 > 100 字符的助手回复
- ❌ 过滤太短或无意义的内容
- 🧹 自动清理格式标记

## 🔧 配置说明

### 默认路径

工具会自动查找默认路径：
```
/Users/monster/Library/Mobile Documents/com~apple~CloudDocs/cherry-studio/chatwise-export-2025-05-08-14-50
```

### 自定义路径

如果默认路径不存在，工具会提示你输入自定义路径。

### 环境要求

确保已正确配置：
```bash
# 检查配置
./check_config.py

# 确保 .env 文件包含正确的 MEM0_API_KEY
```

## 📊 导入示例

### 预览输出示例

```
🔍 Chatwise 聊天记录预览
==================================================
📁 使用默认导出路径: /Users/monster/.../chatwise-export-2025-05-08-14-50
📊 找到 6 个聊天文件

📝 聊天 1: New Chat
   上下文: 使用的模型: openrouter-deepseek/deepseek-r1 | 对话时间: 2025-05-08T02:21:34.611Z
   用户消息: 3 条

📊 分类统计:
   个人偏好: 2 条
   工作信息: 1 条
   技能和知识: 3 条
   其他信息: 5 条

📈 总计: 11 条用户消息

📋 示例内容预览:

🔹 个人偏好 (2 条):
   1. 我喜欢喝美式咖啡，每天早晨都会喝一杯...
      来源: New Chat
   2. 我喜欢摄影和旅行...
      来源: New Chat
```

### 导入输出示例

```
🚀 开始导入 Chatwise 聊天记录...
📁 导出路径: /Users/monster/.../chatwise-export-2025-05-08-14-50
--------------------------------------------------
✅ 加载聊天文件: chat-8z63yruvj0.json
✅ 加载聊天文件: chat-fn3z3rjbvp.json
...

📝 处理聊天 1/6
   用户消息: 3 条
   ✅ 已添加: 我作为一个 ceo，如何去和算法研究员面试...
   ✅ 已添加: 如何去考验软素质...
   助手回复: 2 条
   ✅ 已添加知识: 作为CEO ，在面试和吸引顶尖算法研究员时...

==================================================
📊 导入完成!
✅ 成功添加记忆: 23 条
```

## 🧪 测试导入结果

导入完成后，测试记忆功能：

### 在 Chatwise 中测试

```
用户: "你还记得我们之前讨论过什么吗？"
用户: "告诉我你记得关于我的所有信息"
用户: "你还记得我喜欢什么吗？"
```

### 使用演示脚本测试

```bash
./add_memory_demo.py
```

## ⚠️ 注意事项

### 隐私保护

1. **敏感信息**: 导入前检查是否包含敏感信息
2. **个人数据**: 确保只导入你愿意分享的信息
3. **数据安全**: 导入后可以删除本地导出文件

### 内容质量

1. **重复内容**: 系统会自动过滤重复信息
2. **格式清理**: 自动移除 markdown 格式标记
3. **长度过滤**: 只保留有实质内容的消息

### 性能考虑

1. **大量数据**: 如果聊天记录很多，导入可能需要一些时间
2. **网络连接**: 确保网络连接稳定
3. **API 限制**: 注意 Mem0 API 的使用限制

## 🔄 重新导入

如果需要重新导入：

1. **清理现有记忆**: 使用 `get_all_memories` 查看现有记忆
2. **重新运行导入**: 再次执行 `./import_chatwise.py`
3. **增量导入**: 系统会自动处理重复内容

## 🆘 故障排除

### 常见问题

1. **路径不存在**
   ```
   ❌ 导出路径不存在: /path/to/export
   ```
   解决：检查路径是否正确，或手动输入路径

2. **API 连接失败**
   ```
   ❌ 记忆系统连接失败: Invalid API key
   ```
   解决：检查 `.env` 文件中的 `MEM0_API_KEY`

3. **文件读取错误**
   ```
   ❌ 加载文件失败 chat-xxx.json: Invalid JSON
   ```
   解决：检查导出文件是否完整

4. **导入失败**
   ```
   ❌ 添加记忆失败: Network error
   ```
   解决：检查网络连接和 API 状态

### 获取帮助

如果遇到问题：
1. 运行 `./check_config.py` 检查配置
2. 查看错误日志
3. 确认 Chatwise 导出文件完整性

## 🎯 最佳实践

1. **先预览后导入**: 总是先运行预览脚本
2. **分批导入**: 如果数据量很大，考虑分批导入
3. **定期备份**: 定期导出记忆数据作为备份
4. **内容审查**: 导入前审查敏感内容
5. **测试验证**: 导入后测试记忆功能

现在你可以将 Chatwise 的所有聊天记录转换为 AI 助理的记忆了！ 